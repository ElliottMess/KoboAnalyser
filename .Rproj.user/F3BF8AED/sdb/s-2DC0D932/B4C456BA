{
    "collab_server" : "",
    "contents" : "#' @name kobo_projectinit\n#' @rdname kobo_projectinit\n#' @title  Analysis project initiation\n#'\n#' @description    Create analysis project structure\n#'\n#' @return A structure of directory and scripts in order to set up quickly a project.\n#'\n#' @export kobo_projectinit\n#'\n#' @author Edouard Legoupil, Elliott MEesseiller\n#'\n#' @examples\n#' kobo_projectinit()\n#'\n\n\nkobo_projectinit <- function() {\n  mainDir <- getwd()\n\n  subDir <- \"perso\"\n  if (file.exists(paste(mainDir, subDir, \"/\", sep = \"/\", collapse = \"/\"))) {\n    cat(\"Perso exists in mainDir and is a directory.\\n\")\n  } else if (file.exists(paste(mainDir, subDir, sep = \"/\", collapse = \"/\"))) {\n    cat(\"perso directory exists in your project directory.\\n\")\n    # you will probably want to handle this separately\n  } else {\n    cat(\"perso directory does not exist in your project directory - creating now!\\n \")\n    dir.create(file.path(mainDir, subDir))\n  }\n\n  if (file.exists(paste(mainDir, subDir, \"/\", sep = \"/\", collapse = \"/\"))) {\n    # By this point, the directory either existed or has been successfully created\n    setwd(file.path(mainDir, subDir))\n  } else {\n    cat(\"\")\n    # Handle this error as appropriate\n  }\n  destfile=paste0(mainDir,\"/perso/README.md\")\n  if (!file.exists(destfile)) {\n    fileConn<-file(destfile)\n    writeLines(c(\"### This folder is where your user name, password and config are stored\"), fileConn)\n    close(fileConn)\n  }\n\n\n  subDir <- \"code\"\n  if (file.exists(paste(mainDir, subDir, \"/\", sep = \"/\", collapse = \"/\"))) {\n    cat(\"Code exists in mainDir and is a directory.\\n\")\n  } else if (file.exists(paste(mainDir, subDir, sep = \"/\", collapse = \"/\"))) {\n    cat(\"Code directory exists in your project directory.\\n\")\n    # you will probably want to handle this separately\n  } else {\n    cat(\"Code directory does not exist in your project directory - creating now!\\n \")\n    dir.create(file.path(mainDir, subDir))\n  }\n\n  if (file.exists(paste(mainDir, subDir, \"/\", sep = \"/\", collapse = \"/\"))) {\n    # By this point, the directory either existed or has been successfully created\n    setwd(file.path(mainDir, subDir))\n  } else {\n    cat(\"\")\n    # Handle this error as appropriate\n  }\n  destfile=paste0(mainDir,\"/code/README.md\")\n  if (!file.exists(destfile)) {\n    fileConn<-file(destfile)\n    writeLines(c(\"### This folder is where analysis scripts are saved\"), fileConn)\n    close(fileConn)\n  }\n\n  ## Need to test if we have multiple .libPaths()\n\n  path <- as.data.frame(.libPaths())\n  if (nrow(path)==1) {path_correct <- as.character(path[1,1])\n  } else{ cat(\"You have multiple library path! \\n\")\n     if( dir.exists(file.path(path[1,1],\"/KoboAnalyser\")) ){\n       path_correct <- as.character(path[1,1])\n     } else{ path_correct <- as.character(path[2,1])}\n    }\n\n  destfile=paste0(mainDir,\"/code/0-packages.R\")\n  if (!file.exists(destfile)) {\n    file.copy(paste(path_correct,\"/KoboAnalyser/script/0-packages.R\",sep=\"\"), destfile)\n  }\n\n  destfile=paste0(mainDir,\"/code/0-theme.R\")\n  if (!file.exists(destfile)) {\n    file.copy(paste(path_correct,\"/KoboAnalyser/script//0-theme.R\",sep=\"\"), destfile)\n  }\n\n  destfile=paste0(mainDir,\"/code/0-config.R\")\n  if (!file.exists(destfile)) {\n    file.copy(paste(path_correct,\"/KoboAnalyser/script//0-config.R\",sep=\"\"), destfile)\n  }\n\n  destfile=paste0(mainDir,\"/code/1-loaddata.R\")\n  if (!file.exists(destfile)) {\n    file.copy(paste(path_correct,\"/KoboAnalyser/script//1-loaddata.R\",sep=\"\"), destfile)\n  }\n\n  destfile=paste0(mainDir,\"/code/2-create-graph.R\")\n  if (!file.exists(destfile)) {\n    file.copy(paste(path_correct,\"/KoboAnalyser/script//2-create-graph.R\",sep=\"\"), destfile)\n  }\n\n  destfile=paste0(mainDir,\"/code/3-create-indicators.R\")\n  if (!file.exists(destfile)) {\n    file.copy(paste(path_correct,\"/KoboAnalyser/script//3-create-indicators.R\",sep=\"\"), destfile)\n  }\n\n  destfile=paste0(mainDir,\"/code/4-generate-report.R\")\n  if (!file.exists(destfile)) {\n    file.copy(paste(path_correct,\"/KoboAnalyser/script//4-generate-report.R\",sep=\"\"), destfile)\n  }\n  destfile=paste0(mainDir,\"/code/report.Rmd\")\n  if (!file.exists(destfile)) {\n    file.copy(paste(path_correct,\"/KoboAnalyser/script//report.Rmd\",sep=\"\"), destfile)\n  }\n\n\n  subDir <- \"data\"\n\n  if (file.exists(paste(mainDir, subDir, \"/\", sep = \"/\", collapse = \"/\"))) {\n    cat(\"Data exists in mainDir and is a directory.\\n\")\n  } else if (file.exists(paste(mainDir, subDir, sep = \"/\", collapse = \"/\"))) {\n    cat(\"Data directory exists in your project directory.\\n\")\n    # you will probably want to handle this separately\n  } else {\n    cat(\"Data directory does not exist in your project directory - creating now! \\n\")\n    dir.create(file.path(mainDir, subDir))\n  }\n\n  if (file.exists(paste(mainDir, subDir, \"/\", sep = \"/\", collapse = \"/\"))) {\n    # By this point, the directory either existed or has been successfully created\n    setwd(file.path(mainDir, subDir))\n  } else {\n    cat(\"\")\n    # Handle this error as appropriate\n  }\n  destfile=paste0(mainDir,\"/data/README.md\")\n  if (!file.exists(destfile)) {\n    fileConn<-file(destfile)\n    writeLines(c(\"### This folder is the one where are stored data in CSV format, the form in XLS format and geodata in SHP format\",\n                 \"# BE CAREFUL: DO NOT SHARE PROTECTION SENSITIVE DATA ON GITHUB!\",\n                 \"\",\n                 \"This project is only to keep track of your analysis workflow\"), fileConn)\n    close(fileConn)\n  }\n\n\n  subDir <- \"out\"\n  if (file.exists(paste(mainDir, subDir, \"/\", sep = \"/\", collapse = \"/\"))) {\n    cat(\"Out directory exists in your project directory and is a directory.\\n\")\n  } else if (file.exists(paste(mainDir, subDir, sep = \"/\", collapse = \"/\"))) {\n    cat(\"Ouput exists in your project directory.\\n\")\n    # you will probably want to handle this separately\n  } else {\n    cat(\"Out directory does not exist in your project directory - creating now!\\n \")\n    dir.create(file.path(mainDir, subDir))\n  }\n\n  if (file.exists(paste(mainDir, subDir, \"/\", sep = \"/\", collapse = \"/\"))) {\n    # By this point, the directory either existed or has been successfully created\n    setwd(file.path(mainDir, subDir))\n  } else {\n    cat(\"\")\n    # Handle this error as appropriate\n  }\n  destfile=paste0(mainDir,\"/out/README.md\")\n  if (!file.exists(destfile)) {\n    fileConn<-file(destfile)\n    writeLines(c(\"### This folder is where the analysis output will be generated\"))\n    close(fileConn)\n  }\n\n\n\n\n}\nNULL\n",
    "created" : 1519305610619.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1425125985",
    "id" : "B4C456BA",
    "lastKnownWriteTime" : 1519305976,
    "last_content_update" : 1519305976586,
    "path" : "~/ACTED Afghanistan/8. AME/1. Guidelines and tools/11. Kobo/KoboAnalyser/KoboAnalyser/R/kobo_projectinit.R",
    "project_path" : "R/kobo_projectinit.R",
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}